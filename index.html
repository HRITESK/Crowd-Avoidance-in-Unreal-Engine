<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Crowd Avoidance – UE5 | Ritesh Kashyap</title>
  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
  <link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;600;700;800&family=JetBrains+Mono:wght@300;400;500;600&display=swap" rel="stylesheet"/>
  <style>
    :root {
      --bg:       #dfe8df;
      --bg2:      #d4dfd4;
      --surface:  #cdd8cd;
      --surface2: #c4d0c4;
      --border:   rgba(0,0,0,0.10);
      --border2:  rgba(0,0,0,0.18);
      --text:     #111a11;
      --muted:    #4a5f4a;
      --dim:      #7a917a;
      --acc-cpp:  #1a6e3a;
      --acc-bp:   #1a3e7a;
      --acc-doc:  #7a4a10;
      --acc-red:  #8a1a1a;
    }

    *, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
    html { scroll-behavior: smooth; }

    body {
      background: var(--bg);
      color: var(--text);
      font-family: 'JetBrains Mono', monospace;
      font-size: 13px;
      line-height: 1.7;
      overflow-x: hidden;
    }

    /* Blueprint grid */
    body::before {
      content: '';
      position: fixed; inset: 0; z-index: 0;
      background-image:
        linear-gradient(rgba(0,0,0,0.04) 1px, transparent 1px),
        linear-gradient(90deg, rgba(0,0,0,0.04) 1px, transparent 1px),
        linear-gradient(rgba(0,0,0,0.015) 1px, transparent 1px),
        linear-gradient(90deg, rgba(0,0,0,0.015) 1px, transparent 1px);
      background-size: 80px 80px, 80px 80px, 16px 16px, 16px 16px;
      pointer-events: none;
    }

    .wrap { position: relative; z-index: 1; max-width: 1120px; margin: 0 auto; padding: 0 32px; }

    /* ── NAV ── */
    nav {
      position: fixed; top: 0; left: 0; right: 0; z-index: 100;
      background: rgba(223,232,223,0.92);
      backdrop-filter: blur(12px);
      border-bottom: 1px solid var(--border2);
    }
    .nav-inner {
      max-width: 1120px; margin: 0 auto; padding: 0 32px;
      display: flex; align-items: center; justify-content: space-between;
      height: 56px; gap: 16px;
    }
    .nav-logo {
      font-family: 'Syne', sans-serif; font-weight: 800; font-size: 13px;
      color: var(--text); letter-spacing: 0.06em; text-decoration: none;
      flex-shrink: 0; display: flex; align-items: center; gap: 10px;
    }
    .nav-logo::before {
      content: ''; width: 8px; height: 8px; border-radius: 50%;
      background: var(--acc-cpp); flex-shrink: 0;
    }
    .nav-links { display: flex; gap: 2px; }
    .nav-btn {
      background: none; border: 1px solid transparent;
      color: var(--muted); font-family: 'JetBrains Mono', monospace;
      font-size: 10px; letter-spacing: 0.12em; text-transform: uppercase;
      padding: 5px 13px; cursor: pointer;
      transition: all 0.18s; border-radius: 1px;
    }
    .nav-btn:hover { color: var(--text); border-color: var(--border2); background: var(--surface); }
    .nav-btn-cpp { color: var(--acc-cpp); border-color: rgba(26,110,58,0.25); background: rgba(26,110,58,0.06); }
    .nav-btn-bp  { color: var(--acc-bp);  border-color: rgba(26,62,122,0.25); background: rgba(26,62,122,0.06); }
    .nav-btn-cmp { color: var(--text); border-color: var(--border2); background: var(--surface); }
    .nav-btn-doc { color: var(--acc-doc); border-color: rgba(122,74,16,0.25); background: rgba(122,74,16,0.06); }
    .nav-li {
      display: flex; align-items: center; gap: 7px;
      color: var(--muted); font-size: 10px; letter-spacing: 0.1em;
      text-decoration: none; transition: color 0.2s; flex-shrink: 0;
    }
    .nav-li:hover { color: var(--acc-cpp); }
    .li-icon { width: 14px; height: 14px; fill: currentColor; }

    /* ── HERO ── */
    .hero { padding: 140px 0 64px; position: relative; }

    .hero-meta {
      display: flex; align-items: center; gap: 20px;
      margin-bottom: 32px; font-size: 10px; letter-spacing: 0.15em;
      text-transform: uppercase; color: var(--dim);
    }
    .hero-meta::before { content: 'SYS-001'; }
    .hero-meta-dot { width: 4px; height: 4px; border-radius: 50%; background: var(--acc-cpp); }

    .hero-grid { display: grid; grid-template-columns: 1fr 340px; gap: 64px; align-items: start; }
    @media (max-width: 900px) { .hero-grid { grid-template-columns: 1fr; } }

    h1 {
      font-family: 'Syne', sans-serif; font-weight: 800;
      font-size: clamp(36px, 5.5vw, 72px); line-height: 1.0;
      letter-spacing: -0.04em; color: var(--text);
      margin-bottom: 32px;
    }
    h1 .outline {
      -webkit-text-stroke: 1.5px var(--text);
      color: transparent;
    }

    .hero-sub { color: var(--muted); font-size: 13px; line-height: 1.85; margin-bottom: 28px; }
    .hero-tags { display: flex; flex-wrap: wrap; gap: 6px; }
    .tag {
      padding: 4px 11px; border: 1px solid var(--border2);
      font-size: 10px; letter-spacing: 0.1em; text-transform: uppercase;
      color: var(--muted); background: var(--surface);
    }

    /* Hero side panel */
    .hero-panel {
      border: 1px solid var(--border2);
      background: var(--surface);
      padding: 0;
      font-size: 11px;
    }
    .panel-row {
      display: flex; justify-content: space-between;
      padding: 10px 14px; border-bottom: 1px solid var(--border);
      gap: 16px;
    }
    .panel-row:last-child { border-bottom: none; }
    .panel-key { color: var(--dim); letter-spacing: 0.08em; text-transform: uppercase; font-size: 10px; }
    .panel-val { color: var(--text); font-weight: 500; text-align: right; }
    .panel-header {
      background: var(--surface2); padding: 8px 14px;
      border-bottom: 1px solid var(--border2);
      font-size: 10px; letter-spacing: 0.15em; text-transform: uppercase;
      color: var(--dim);
    }

    /* ── SECTIONS ── */
    section { padding: 72px 0; border-top: 1px solid var(--border2); }

    .section-header { display: flex; align-items: center; gap: 14px; margin-bottom: 40px; }
    .section-num {
      font-size: 10px; letter-spacing: 0.15em; color: var(--dim);
      border: 1px solid var(--border2); padding: 3px 8px; background: var(--surface);
    }
    .section-header h2 {
      font-family: 'Syne', sans-serif; font-weight: 700;
      font-size: 24px; letter-spacing: -0.02em;
    }
    .section-line { flex: 1; height: 1px; background: var(--border2); }

    /* ── VIDEOS ── */
    .video-grid-3 { display: grid; grid-template-columns: repeat(3,1fr); gap: 16px; margin-bottom: 44px; }
    .video-grid-1 { display: grid; grid-template-columns: 1fr; max-width: 580px; margin-bottom: 44px; }
    @media (max-width: 860px) { .video-grid-3 { grid-template-columns: 1fr; } }

    .video-wrap { display: flex; flex-direction: column; gap: 8px; }
    .video-label {
      font-size: 10px; letter-spacing: 0.12em; text-transform: uppercase;
      color: var(--dim); display: flex; align-items: center; gap: 8px;
      padding: 6px 10px; background: var(--surface2); border: 1px solid var(--border);
      border-bottom: none;
    }
    .video-label .dot { width: 5px; height: 5px; border-radius: 50%; flex-shrink: 0; }
    .video-embed {
      aspect-ratio: 16/9; background: var(--surface2);
      border: 1px solid var(--border2); overflow: hidden;
    }
    .video-embed iframe { width: 100%; height: 100%; border: none; display: block; }

    /* ── SYSTEM INFO ── */
    .sys-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 40px; }
    @media (max-width: 768px) { .sys-grid { grid-template-columns: 1fr; } }

    .version-badge {
      display: inline-flex; align-items: center; gap: 8px;
      margin-bottom: 12px; padding: 4px 10px;
      border: 1px solid var(--border2); background: var(--surface);
    }
    .badge-dot { width: 6px; height: 6px; border-radius: 50%; }
    .badge-label { font-size: 10px; letter-spacing: 0.15em; text-transform: uppercase; }
    .cpp-c { color: var(--acc-cpp); }
    .cpp-d { background: var(--acc-cpp); }
    .bp-c  { color: var(--acc-bp); }
    .bp-d  { background: var(--acc-bp); }

    .sys-title { font-family: 'Syne', sans-serif; font-weight: 700; font-size: 18px; letter-spacing: -0.02em; margin-bottom: 8px; }
    .sys-desc  { color: var(--muted); font-size: 13px; line-height: 1.85; margin-bottom: 24px; }

    .feat-list { list-style: none; display: flex; flex-direction: column; gap: 6px; }
    .feat-list li {
      display: flex; align-items: flex-start; gap: 10px;
      padding: 9px 12px; background: var(--surface);
      border: 1px solid var(--border); font-size: 12px;
      transition: border-color 0.15s, background 0.15s;
    }
    .feat-list li:hover { border-color: var(--border2); background: var(--surface2); }
    .feat-arrow { flex-shrink: 0; margin-top: 1px; font-size: 11px; }

    /* ── COMPARE ── */
    .cmp-table { width: 100%; border-collapse: collapse; }
    .cmp-table th, .cmp-table td {
      padding: 11px 18px; text-align: left;
      border-bottom: 1px solid var(--border); font-size: 12px;
    }
    .cmp-table thead tr { background: var(--surface2); border-bottom: 2px solid var(--border2); }
    .cmp-table thead th { font-family: 'Syne', sans-serif; font-size: 11px; letter-spacing: 0.08em; }
    .cmp-table thead th:nth-child(2) { color: var(--acc-cpp); }
    .cmp-table thead th:nth-child(3) { color: var(--acc-bp); }
    .cmp-table tbody tr { transition: background 0.12s; }
    .cmp-table tbody tr:hover { background: var(--surface); }
    .cmp-table td:first-child { color: var(--dim); font-size: 11px; letter-spacing: 0.04em; }
    .good { color: var(--acc-cpp); }
    .mid  { color: var(--acc-bp); }
    .na   { color: var(--dim); }

    /* ── DOCS ── */
    .doc-layout { display: grid; grid-template-columns: 200px 1fr; gap: 48px; align-items: start; }
    @media (max-width: 768px) { .doc-layout { grid-template-columns: 1fr; } }

    .doc-sidebar { position: sticky; top: 72px; }
    .doc-sidebar-hd {
      font-size: 9px; letter-spacing: 0.2em; text-transform: uppercase;
      color: var(--dim); margin-bottom: 8px; padding: 0 10px;
    }
    .doc-nav { display: flex; flex-direction: column; }
    .doc-nav-btn {
      padding: 8px 10px; border-left: 2px solid transparent;
      font-size: 11px; color: var(--muted); cursor: pointer;
      background: none; border-right: none; border-top: none; border-bottom: none;
      text-align: left; font-family: 'JetBrains Mono', monospace;
      letter-spacing: 0.02em; transition: all 0.15s;
    }
    .doc-nav-btn:hover { color: var(--text); border-left-color: var(--border2); background: var(--surface); }
    .doc-nav-btn.on { color: var(--acc-doc); border-left-color: var(--acc-doc); background: rgba(122,74,16,0.05); }

    .doc-body { display: flex; flex-direction: column; gap: 56px; }

    .doc-sec-title {
      font-family: 'Syne', sans-serif; font-weight: 700; font-size: 18px;
      letter-spacing: -0.02em; margin-bottom: 14px;
      display: flex; align-items: center; gap: 10px; flex-wrap: wrap;
    }
    .tag-s {
      font-family: 'JetBrains Mono', monospace; font-size: 9px;
      letter-spacing: 0.1em; padding: 2px 7px; text-transform: uppercase;
    }
    .tag-cpp  { background: rgba(26,110,58,0.1); color: var(--acc-cpp); border: 1px solid rgba(26,110,58,0.2); }
    .tag-bp   { background: rgba(26,62,122,0.1); color: var(--acc-bp);  border: 1px solid rgba(26,62,122,0.2); }
    .tag-both { background: rgba(122,74,16,0.1); color: var(--acc-doc); border: 1px solid rgba(122,74,16,0.2); }

    .doc-p { color: var(--muted); font-size: 12px; line-height: 1.9; margin-bottom: 14px; }
    .doc-p strong { color: var(--text); }

    .math-box {
      background: var(--surface2); border: 1px solid var(--border2);
      border-left: 3px solid var(--acc-doc);
      padding: 18px 22px; margin: 18px 0;
    }
    .math-lbl { font-size: 9px; letter-spacing: 0.18em; text-transform: uppercase; color: var(--acc-doc); margin-bottom: 10px; }
    .math-f { font-size: 14px; color: var(--text); letter-spacing: 0.03em; margin-bottom: 10px; font-weight: 500; }
    .math-note { font-size: 11px; color: var(--muted); line-height: 1.75; }

    .callout {
      background: var(--surface); border: 1px solid var(--border2);
      padding: 14px 18px; margin: 16px 0;
      font-size: 12px; color: var(--muted); line-height: 1.85;
    }
    .callout strong { color: var(--text); }

    /* ── FOOTER ── */
    footer { border-top: 2px solid var(--border2); padding: 36px 0; }
    .footer-inner {
      display: flex; align-items: center; justify-content: space-between;
      flex-wrap: wrap; gap: 12px;
    }
    footer p { color: var(--dim); font-size: 11px; }
    footer a { color: var(--acc-cpp); text-decoration: none; }
    footer a:hover { text-decoration: underline; }
    .footer-ref {
      font-size: 10px; letter-spacing: 0.12em; text-transform: uppercase;
      color: var(--dim); display: flex; align-items: center; gap: 8px;
    }
    .footer-ref::before { content: 'REF-CAI-001'; }

    /* ── FADE ── */
    .fu { opacity: 0; transform: translateY(18px); transition: opacity 0.5s ease, transform 0.5s ease; }
    .fu.on { opacity: 1; transform: translateY(0); }

    /* corner decoration */
    .corner-mark {
      position: absolute; font-size: 9px; letter-spacing: 0.1em;
      color: var(--dim); text-transform: uppercase;
    }

    /* ── MOBILE ── */
    @media (max-width: 640px) {

      /* Globals */
      .wrap { padding: 0 16px; }
      body { font-size: 12px; }

      /* Nav — collapse to logo + hamburger feel */
      .nav-inner { padding: 0 16px; height: auto; flex-wrap: wrap; gap: 0; }
      .nav-logo { font-size: 11px; padding: 10px 0; }
      .nav-links {
        width: 100%; overflow-x: auto; gap: 4px;
        padding: 6px 0 8px; border-top: 1px solid var(--border);
        -webkit-overflow-scrolling: touch;
        scrollbar-width: none;
      }
      .nav-links::-webkit-scrollbar { display: none; }
      .nav-btn { font-size: 9px; padding: 5px 10px; white-space: nowrap; }
      .nav-li { display: none; } /* hide linkedin in nav on mobile, it's in footer */

      /* Hero */
      .hero { padding: 110px 0 40px; }
      .hero-grid { grid-template-columns: 1fr; gap: 28px; }
      .hero-meta { font-size: 9px; gap: 10px; margin-bottom: 20px; flex-wrap: wrap; }
      h1 { font-size: clamp(32px, 10vw, 52px); margin-bottom: 20px; }
      .hero-sub { font-size: 12px; margin-bottom: 20px; }
      .hero-tags { gap: 5px; }
      .tag { font-size: 9px; padding: 3px 8px; }

      /* Hero panel — horizontal scroll table feel */
      .hero-panel { font-size: 10px; }
      .panel-row { padding: 8px 12px; }
      .panel-key { font-size: 9px; }
      .panel-val { font-size: 10px; }

      /* Sections */
      section { padding: 48px 0; }
      .section-header { gap: 10px; margin-bottom: 28px; }
      .section-header h2 { font-size: 18px; }
      .section-num { font-size: 9px; }

      /* Videos — always single column on mobile */
      .video-grid-3,
      .video-grid-1,
      div[style*="grid-template-columns:1fr 1fr"] {
        grid-template-columns: 1fr !important;
        display: flex !important;
        flex-direction: column !important;
        gap: 16px !important;
      }

      /* System info grid */
      .sys-grid { grid-template-columns: 1fr; gap: 24px; }
      .sys-title { font-size: 16px; }
      .sys-desc { font-size: 12px; }
      .feat-list li { font-size: 11px; padding: 8px 10px; }

      /* Compare table — horizontal scroll */
      .cmp-table { font-size: 11px; display: block; overflow-x: auto; white-space: nowrap; -webkit-overflow-scrolling: touch; }
      .cmp-table th, .cmp-table td { padding: 9px 12px; font-size: 10px; }

      /* Docs — stack sidebar above content */
      .doc-layout { grid-template-columns: 1fr; gap: 24px; }
      .doc-sidebar { position: static; }
      .doc-nav {
        flex-direction: row; flex-wrap: wrap; gap: 4px;
        border-left: none; border-top: 2px solid var(--border2);
        padding-top: 10px;
      }
      .doc-nav-btn {
        border-left: none; border-bottom: 2px solid transparent;
        padding: 5px 10px; font-size: 10px;
        background: var(--surface); border-radius: 0;
      }
      .doc-nav-btn.on {
        border-left: none; border-bottom: 2px solid var(--acc-doc);
        background: rgba(122,74,16,0.08);
      }
      .doc-body { gap: 36px; }
      .doc-sec-title { font-size: 15px; gap: 8px; }
      .doc-p { font-size: 11px; }

      /* Math boxes — prevent overflow */
      .math-box { padding: 14px 14px; }
      .math-f {
        font-size: 11px; word-break: break-all;
        overflow-wrap: anywhere; white-space: normal;
      }
      .math-note { font-size: 10px; }
      .math-lbl { font-size: 9px; }

      /* Callouts */
      .callout { font-size: 11px; padding: 12px 14px; }

      /* Footer */
      .footer-inner { flex-direction: column; gap: 8px; text-align: center; }
      footer p { font-size: 11px; }
      .footer-ref { display: none; }
    }

    /* Tablet tweaks */
    @media (min-width: 641px) and (max-width: 900px) {
      .wrap { padding: 0 24px; }
      .nav-inner { padding: 0 24px; }
      .nav-btn { font-size: 10px; padding: 5px 10px; }
      .sys-grid { grid-template-columns: 1fr; gap: 28px; }
      .doc-layout { grid-template-columns: 180px 1fr; gap: 28px; }
      .math-f { font-size: 12px; word-break: break-word; white-space: normal; }
      h1 { font-size: clamp(36px, 6vw, 60px); }
    }
  </style>
</head>
<body>

<!-- NAV -->
<nav>
  <div class="nav-inner">
    <a class="nav-logo" href="#">RITESH KASHYAP // UE5</a>
    <div class="nav-links">
      <button class="nav-btn nav-btn-cpp" onclick="go('cpp')">C++ System</button>
      <button class="nav-btn nav-btn-bp"  onclick="go('blueprint')">Blueprint</button>
      <button class="nav-btn nav-btn-cmp" onclick="go('compare')">Compare</button>
      <button class="nav-btn nav-btn-doc" onclick="go('docs')">Docs</button>
    </div>
    <a class="nav-li" href="https://www.linkedin.com/in/hriteshkashyap/" target="_blank">
      <svg class="li-icon" viewBox="0 0 24 24"><path d="M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433a2.062 2.062 0 01-2.063-2.065 2.064 2.064 0 112.063 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"/></svg>
      LinkedIn
    </a>
  </div>
</nav>

<!-- HERO -->
<div class="wrap">
  <div class="hero">
    <div class="hero-meta">
      <span class="hero-meta-dot"></span>
      Unreal Engine 5 &nbsp;·&nbsp; AI Systems &nbsp;·&nbsp; Game Development
    </div>

    <div class="hero-grid">
      <div>
        <h1>CROWD <span class="outline">AVOID</span>ANCE</h1>
        <p class="hero-sub">Two implementations of a real-time crowd avoidance system built in UE5 — one engineered in pure C++ with spatial grid detection, probe-based collision awareness, and multi-state escape logic; one in Blueprint optimized for rapid iteration and designer accessibility.</p>
        <div class="hero-tags">
          <span class="tag">Unreal Engine 5</span>
          <span class="tag">C++ Plugin</span>
          <span class="tag">Blueprint</span>
          <span class="tag">Spatial Hashing</span>
          <span class="tag">Steering AI</span>
          <span class="tag">Agent Simulation</span>
        </div>
      </div>

      <div class="hero-panel fu">
        <div class="panel-header">// SYSTEM MANIFEST</div>
        <div class="panel-row"><span class="panel-key">Project</span><span class="panel-val">CodeFundamentals</span></div>
        <div class="panel-row"><span class="panel-key">Engine</span><span class="panel-val">UE5</span></div>
        <div class="panel-row"><span class="panel-key">Implementations</span><span class="panel-val">2</span></div>
        <div class="panel-row"><span class="panel-key">C++ Detection</span><span class="panel-val">Collider-Driven Probes</span></div>
        <div class="panel-row"><span class="panel-key">Blueprint Algo</span><span class="panel-val">Overlap Query</span></div>
        <div class="panel-row"><span class="panel-key">Debug System</span><span class="panel-val">Probe + Path Vis</span></div>
        <div class="panel-row"><span class="panel-key">State Machine</span><span class="panel-val">Confidence-Based</span></div>
        <div class="panel-row"><span class="panel-key">Escape Logic</span><span class="panel-val">Active</span></div>
        <div class="panel-row"><span class="panel-key">Author</span><span class="panel-val">Ritesh Kashyap</span></div>
      </div>
    </div>
  </div>
</div>

<!-- C++ SECTION -->
<section id="cpp">
  <div class="wrap">
    <div class="section-header fu">
      <span class="section-num">01</span>
      <h2 class="cpp-c">C++ Implementation</h2>
      <div class="section-line"></div>
    </div>

    <div class="video-grid-1 fu" style="max-width:100%; grid-template-columns:1fr 1fr; display:grid; gap:16px; margin-bottom:44px;">
      <div class="video-wrap">
        <div class="video-label"><span class="dot" style="background:var(--acc-cpp)"></span>C++ Demo</div>
        <div class="video-embed">
          <iframe src="https://www.youtube.com/embed/R_DG2QOsXr8" allowfullscreen allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"></iframe>
        </div>
      </div>
      <div class="video-wrap">
        <div class="video-label"><span class="dot" style="background:rgba(26,110,58,0.4)"></span>Debug View — Probe Points + Desired Path</div>
        <div class="video-embed">
          <iframe src="https://www.youtube.com/embed/hUiIwY-eoPw" allowfullscreen allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"></iframe>
        </div>
      </div>
    </div>

    <div class="sys-grid fu" style="transition-delay:0.1s">
      <div>
        <div class="version-badge"><span class="badge-dot cpp-d"></span><span class="badge-label cpp-c">C++ — Full Implementation</span></div>
        <div class="sys-title">High-Performance Crowd Agent</div>
        <p class="sys-desc">Built entirely in C++ for maximum runtime performance. Each agent maintains full spatial awareness through a grid-based lookup, perceives its surroundings through distributed probe points, and transitions between behavioral states using confidence-based logic. The debug view shows probe contacts on colliders and the agent's computed desired path in real time.</p>
      </div>
      <div>
        <ul class="feat-list">
          <li><span class="feat-arrow cpp-c">→</span><span><strong>Collider-driven probe detection</strong> — each collider dynamically influences the agent's probe points, assembling spatial awareness fresh every tick</span></li>
          <li><span class="feat-arrow cpp-c">→</span><span><strong>Distributed probe points</strong> — radial samples detect colliders, each contributing weighted repulsion</span></li>
          <li><span class="feat-arrow cpp-c">→</span><span><strong>Desired path visualization</strong> — debug renders goal vector vs actual path, showing avoidance deflection live</span></li>
          <li><span class="feat-arrow cpp-c">→</span><span><strong>Anticipatory prediction</strong> — avoidance computed against projected future positions, not just current</span></li>
          <li><span class="feat-arrow cpp-c">→</span><span><strong>Confidence-based state switching</strong> — mode transitions require sustained trigger, not single-frame reading</span></li>
          <li><span class="feat-arrow cpp-c">→</span><span><strong>Emergency escape logic</strong> — detects full enclosure where forces cancel; fires targeted breakout vector</span></li>
          <li><span class="feat-arrow cpp-c">→</span><span><strong>Stuck detection</strong> — displacement tracked over rolling frame window; recovery triggers automatically</span></li>
        </ul>
      </div>
    </div>
  </div>
</section>

<!-- BLUEPRINT SECTION -->
<section id="blueprint">
  <div class="wrap">
    <div class="section-header fu">
      <span class="section-num">02</span>
      <h2 class="bp-c">Blueprint Implementation</h2>
      <div class="section-line"></div>
    </div>

    <div class="video-grid-1 fu">
      <div class="video-wrap">
        <div class="video-label"><span class="dot" style="background:var(--acc-bp)"></span>Blueprint Demo</div>
        <div class="video-embed">
          <iframe src="https://www.youtube.com/embed/CVa75tNhIyQ" allowfullscreen allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture"></iframe>
        </div>
      </div>
    </div>

    <div class="sys-grid fu" style="transition-delay:0.1s">
      <div>
        <div class="version-badge"><span class="badge-dot bp-d"></span><span class="badge-label bp-c">Blueprint — Designer Friendly</span></div>
        <div class="sys-title">Lightweight Avoidance Agent</div>
        <p class="sys-desc">A Blueprint-first approach that trades computational depth for rapid iteration and full designer accessibility. Uses separation and avoidance forces to produce convincing crowd behavior without spatial indexing or probe systems. All parameters are exposed and live-tunable in PIE without recompiling.</p>
      </div>
      <div>
        <ul class="feat-list">
          <li><span class="feat-arrow bp-c">→</span><span><strong>Separation forces</strong> — vector push away from nearby agents, tunable per character class</span></li>
          <li><span class="feat-arrow bp-c">→</span><span><strong>Avoidance steering</strong> — lightweight directional bias, minimal frame budget cost</span></li>
          <li><span class="feat-arrow bp-c">→</span><span><strong>Designer accessible</strong> — all parameters live on the Blueprint, adjustable in PIE instantly</span></li>
          <li><span class="feat-arrow bp-c">→</span><span><strong>Low overhead</strong> — ideal for background crowds where density matters more than edge-case handling</span></li>
          <li><span class="feat-arrow bp-c">→</span><span><strong>Rapid prototyping</strong> — validate crowd feel and density before committing to a full C++ pass</span></li>
        </ul>
      </div>
    </div>
  </div>
</section>

<!-- COMPARE -->
<section id="compare">
  <div class="wrap">
    <div class="section-header fu">
      <span class="section-num">03</span>
      <h2>Head-to-Head</h2>
      <div class="section-line"></div>
    </div>
    <div class="fu">
      <table class="cmp-table">
        <thead>
          <tr><th>Criterion</th><th>C++ Version</th><th>Blueprint Version</th></tr>
        </thead>
        <tbody>
          <tr><td>Spatial detection</td><td class="good">Collider-driven probe points</td><td class="mid">Direct overlap query</td></tr>
          <tr><td>Collision awareness</td><td class="good">Distributed probe points</td><td class="na">Not implemented</td></tr>
          <tr><td>Desired path debug</td><td class="good">Visualized per agent</td><td class="na">None</td></tr>
          <tr><td>State transitions</td><td class="good">Confidence-threshold</td><td class="mid">Immediate</td></tr>
          <tr><td>Path prediction</td><td class="good">Anticipatory (future pos)</td><td class="na">Reactive only</td></tr>
          <tr><td>Stuck recovery</td><td class="good">Dedicated escape system</td><td class="na">Not implemented</td></tr>
          <tr><td>Emergency enclosure</td><td class="good">Fully handled</td><td class="na">Not handled</td></tr>
          <tr><td>Frame time at scale</td><td class="good">Stable</td><td class="mid">Acceptable at low density</td></tr>
          <tr><td>Designer access</td><td class="na">Requires recompile</td><td class="good">Live tunable in PIE</td></tr>
          <tr><td>Best for</td><td class="good">Main agents, dense crowds</td><td class="mid">Background, prototyping</td></tr>
        </tbody>
      </table>
    </div>
  </div>
</section>

<!-- DOCS -->
<section id="docs">
  <div class="wrap">
    <div class="section-header fu">
      <span class="section-num">04</span>
      <h2 style="color:var(--acc-doc)">Documentation</h2>
      <div class="section-line"></div>
    </div>

    <div class="doc-layout fu">
      <div class="doc-sidebar">

        <div class="doc-nav">
          <button class="doc-nav-btn on"  onclick="dn(this,'d-ov')">Overview</button>
          <button class="doc-nav-btn"     onclick="dn(this,'d-sp')">Spatial Detection</button>
          <button class="doc-nav-btn"     onclick="dn(this,'d-pb')">Probe System</button>
          <button class="doc-nav-btn"     onclick="dn(this,'d-fo')">Force Model</button>
          <button class="doc-nav-btn"     onclick="dn(this,'d-pr')">Path Prediction</button>
          <button class="doc-nav-btn"     onclick="dn(this,'d-st')">State Logic</button>
          <button class="doc-nav-btn"     onclick="dn(this,'d-sk')">Stuck Recovery</button>
          <button class="doc-nav-btn"     onclick="dn(this,'d-bp')">Blueprint Approach</button>
        </div>
      </div>

      <div class="doc-body">

        <div id="d-ov">
          <div class="doc-sec-title">System Overview <span class="tag-s tag-both">Both Versions</span></div>
          <p class="doc-p">The core problem crowd avoidance solves is simple to state but hard to execute at runtime: <strong>every agent needs to reach its goal without colliding with every other agent trying to do the same</strong>. Naive implementations — checking every agent against every other — scale as O(n²), becoming unusable past even moderate crowd sizes.</p>
          <p class="doc-p">Both implementations here solve that, but at different points on the cost-vs-quality tradeoff. The C++ version is engineered for correctness under adversarial conditions: dense crowds, tight corridors, agents completely surrounded. The Blueprint version trades edge-case handling for iteration speed and is the right tool for background crowds and early design validation.</p>
        </div>

        <div id="d-sp">
          <div class="doc-sec-title">Spatial Detection <span class="tag-s tag-cpp">C++ Only</span></div>
          <p class="doc-p">The C++ system's awareness model is built around <strong>probe points distributed radially around the agent</strong>. Rather than querying a static world structure, each collider in the environment dynamically influences these probe points as the agent moves through the scene. When a collider enters the range of a probe, it registers as a contact and contributes a directional response — the agent's perception of its surroundings is therefore entirely reactive, assembled fresh each tick from live collider interactions.</p>
          <p class="doc-p">This is visualized clearly in the debug view: the ring of probes around the agent lights up at contact points, and you can see how differently-shaped or positioned colliders push the probe responses — and therefore the agent's steering — in different directions. The <strong>desired path</strong> is also drawn, showing the direction the agent would take in open space versus where it actually steers after probe influences are applied.</p>
          <div class="math-box">
            <div class="math-lbl">Probe Contact Influence</div>
            <div class="math-f">F_probe = Σ &nbsp;[ (1 − dᵢ/r) × normalize(P_agent − P_collideri) ]</div>
            <div class="math-note">Each probe i that is within influence radius r of a collider contributes a weighted push vector. The weight scales linearly with proximity — a probe flush against a collider surface pushes at full strength, while one at the edge of its range contributes almost nothing. All active probe contributions are summed into a single avoidance force that feeds into the final movement calculation. The agent never needs to know about the world's geometry explicitly — it only responds to what its probes are currently feeling.</div>
          </div>
        </div>

        <div id="d-pb">
          <div class="doc-sec-title">Probe-Based Collision Awareness <span class="tag-s tag-cpp">C++ Only</span></div>
          <p class="doc-p">Rather than treating each agent as a single point, the C++ system places a ring of <strong>probe points</strong> around the agent. Each probe samples the agent's perceived personal space. When a probe approaches a collider, it contributes a repulsion vector weighted by proximity — visible in the debug view as active contact points around each agent's boundary.</p>
          <div class="math-box">
            <div class="math-lbl">Probe Repulsion Weight</div>
            <div class="math-f">w = 1 − (d / r)&nbsp;&nbsp;→&nbsp;&nbsp; F_probe = w × normalize(P_agent − P_collider)</div>
            <div class="math-note">As distance d approaches zero, weight approaches 1 — maximum push. When d equals the influence radius r, weight reaches zero — no contribution. The result is a smooth, continuous repulsion that grows proportionally as the agent closes in. All probe contributions are summed before entering the force pass, producing a single clean collision avoidance vector.</div>
          </div>
          <p class="doc-p">The debug view also renders the <strong>desired path</strong> — the direction the agent would travel in an empty scene. Comparing this against the actual trajectory shows exactly how much the avoidance system is deflecting the agent, making fine-tuning intuitive and precise.</p>
        </div>

        <div id="d-fo">
          <div class="doc-sec-title">Force Accumulation Model <span class="tag-s tag-both">Both Versions</span></div>
          <p class="doc-p">Both systems decompose movement into independent force components accumulated each tick. The final velocity <em>emerges</em> from the balance of competing influences rather than being chosen directly.</p>
          <div class="callout">
            <strong>Goal force</strong> — pulls the agent toward its target. The base intent that everything else opposes or bends.<br/>
            <strong>Separation force</strong> — pushes away from agents within minimum comfort distance.<br/>
            <strong>Alignment force</strong> — nudges the agent to roughly match average heading of neighbors, reducing chaotic crossing.<br/>
            <strong>Collision force</strong> — sums repulsion from all active probe contacts with static geometry. (C++ only)
          </div>
          <div class="math-box">
            <div class="math-lbl">Force Summation</div>
            <div class="math-f">V_final = normalize( w₁·F_goal + w₂·F_sep + w₃·F_align + w₄·F_col ) × speed</div>
            <div class="math-note">Each component is weighted by a tunable scalar. The sum is normalized to unit length then scaled by target speed — avoidance only changes direction, never speed. Heavy separation weight produces spaced-out cautious movement. Heavy goal weight produces urgency and tighter packing under pressure. One key property: when an agent is surrounded on all sides, separation forces cancel to near-zero — exactly the condition the escape system exists to resolve.</div>
          </div>
        </div>

        <div id="d-pr">
          <div class="doc-sec-title">Anticipatory Path Prediction <span class="tag-s tag-cpp">C++ Only</span></div>
          <p class="doc-p">Purely reactive avoidance only responds to current positions. Two agents heading directly toward each other won't register the conflict until they're already close — making avoidance feel sudden and jerky when it finally fires.</p>
          <p class="doc-p">The C++ system uses <strong>future position estimation</strong>: each agent's velocity projects where it will be in a short lookahead window, and avoidance is computed against those predicted positions. This gives the system temporal advantage — course corrections begin earlier and resolve more smoothly.</p>
          <div class="math-box">
            <div class="math-lbl">Future Position Estimate</div>
            <div class="math-f">P_future = P_current + V_current × t_lookahead</div>
            <div class="math-note">t_lookahead is typically 0.3–0.8 seconds. Longer lookahead produces early gentle avoidance arcs but may cause agents to swerve around things they would have passed fine. Shorter is more reactive but can feel sudden. The debug path overlay shows both predicted trajectory and actual path simultaneously, making this tradeoff visually observable and tunable at runtime.</div>
          </div>
        </div>

        <div id="d-st">
          <div class="doc-sec-title">State Transition Logic <span class="tag-s tag-cpp">C++ Only</span></div>
          <p class="doc-p">The C++ agent operates across distinct states: normal movement, heightened avoidance, and emergency escape. Switching state the moment a threshold is crossed causes <strong>flickering</strong> — agents near the boundary condition toggle rapidly on consecutive frames, producing jittery, unnatural movement.</p>
          <div class="callout">
            Think of how a person decides to change direction in a crowd: they don't halt the moment they feel slightly cramped. They observe over a moment, assess whether it's getting worse, and only then adjust. The accumulator enforces the same patience mathematically.
          </div>
          <div class="math-box">
            <div class="math-lbl">Confidence Accumulation</div>
            <div class="math-f">confidence += Δt &nbsp;(while condition holds)&nbsp;&nbsp;→&nbsp;&nbsp; if confidence > threshold: commit()</div>
            <div class="math-note">The accumulator increments by delta time each frame the condition is true, and resets if the condition breaks before threshold. A transition only fires after sustained presence — typically 0.1 to 0.2 seconds. This eliminates single-frame jitter while still responding promptly to genuine, sustained environmental changes.</div>
          </div>
        </div>

        <div id="d-sk">
          <div class="doc-sec-title">Stuck Detection &amp; Escape <span class="tag-s tag-cpp">C++ Only</span></div>
          <p class="doc-p">Even well-tuned avoidance produces deadlock. Two agents approaching head-on with symmetric separation forces stall — each blocked by the other's push. In dense crowds this occurs regularly without dedicated recovery.</p>
          <p class="doc-p">The system monitors each agent's <strong>displacement over a rolling frame window</strong>. If total movement falls below a minimum threshold over that window, the agent is flagged as stuck. A perpendicular escape vector is injected at high priority weight to sidestep the blockage.</p>
          <div class="math-box">
            <div class="math-lbl">Displacement Check</div>
            <div class="math-f">displacement = | P_now − P_N_frames_ago |</div>
            <div class="math-note">If displacement stays below minMoveThreshold for the full sample window, escape mode activates. The escape vector is the right-perpendicular of the goal direction — a sidestep that breaks symmetry without abandoning the goal. Once displacement recovers on a subsequent window, escape mode clears and normal avoidance resumes automatically.</div>
          </div>
        </div>

        <div id="d-bp">
          <div class="doc-sec-title">Blueprint Approach &amp; Tradeoffs <span class="tag-s tag-bp">Blueprint</span></div>
          <p class="doc-p">The Blueprint implementation applies the same conceptual force model — goal, separation, alignment — but without the spatial grid, probe system, anticipatory prediction, or multi-state machine. Each agent runs a direct overlap query to find neighbors and immediately computes a response from current positions.</p>
          <p class="doc-p">This works well when crowds are sparse enough that agents rarely end up fully surrounded, and when small amounts of jitter are acceptable. As a <strong>rapid prototyping tool</strong> it excels — convincing crowd behavior in minutes, all parameters exposed to designers with no code changes.</p>
          <div class="callout">
            <strong>Recommended workflow:</strong> Use Blueprint to explore crowd density and feel early. Once you know what you want, port the agents that matter to C++ for correctness and performance. Both can coexist — Blueprint agents for background, C++ agents for characters the player actually interacts with.
          </div>
        </div>

      </div><!-- doc-body -->
    </div><!-- doc-layout -->
  </div>
</section>

<!-- FOOTER -->
<footer>
  <div class="wrap">
    <div class="footer-inner">
      <p>Built by <a href="https://www.linkedin.com/in/hriteshkashyap/" target="_blank">Ritesh Kashyap</a> &nbsp;·&nbsp; Unreal Engine 5 &nbsp;·&nbsp; C++ &amp; Blueprint AI Systems</p>
      <span class="footer-ref"></span>
    </div>
  </div>
</footer>

<script>
  function go(id) {
    const el = document.getElementById(id);
    if (!el) return;
    window.scrollTo({ top: el.getBoundingClientRect().top + window.scrollY - 68, behavior: 'smooth' });
  }

  function dn(btn, id) {
    document.querySelectorAll('.doc-nav-btn').forEach(b => b.classList.remove('on'));
    btn.classList.add('on');
    const el = document.getElementById(id);
    if (!el) return;
    window.scrollTo({ top: el.getBoundingClientRect().top + window.scrollY - 88, behavior: 'smooth' });
  }

  // Fade-up on scroll
  const obs = new IntersectionObserver(entries => {
    entries.forEach(e => { if (e.isIntersecting) { e.target.classList.add('on'); obs.unobserve(e.target); } });
  }, { threshold: 0.07 });
  document.querySelectorAll('.fu').forEach(el => obs.observe(el));

  // Scroll-spy for doc sidebar
  const docSections = ['d-ov','d-sp','d-pb','d-fo','d-pr','d-st','d-sk','d-bp'];
  const docBtns = document.querySelectorAll('.doc-nav-btn');

  function updateSidebar() {
    const scrollY = window.scrollY;
    let current = 0;
    docSections.forEach((id, i) => {
      const el = document.getElementById(id);
      if (!el) return;
      const top = el.getBoundingClientRect().top + window.scrollY;
      if (scrollY >= top - 140) current = i;
    });
    docBtns.forEach(b => b.classList.remove('on'));
    if (docBtns[current]) docBtns[current].classList.add('on');
  }

  window.addEventListener('scroll', updateSidebar, { passive: true });
</script>
</body>
</html>
